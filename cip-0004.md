        CIP: 4
        Title: Subassets
        Author: Jeremy Johnson (J-Dog)
        Status: Draft
        Type: Standards Track
        Created: 2016-01-29


# Abstract

Establishes a protocol for issuing subassets 

(_ex._ `PIZZA`, `PIZZA.DOMINOS`, `PIZZA.DOMINOS.COUPON`)

# Motivation

To enable named asset owners the ability and flexibility to issue new easily identified and related named assets.

# Definitions

asset

    A named asset which acts as PARENT to a subasset

subasset

    A numeric asset which is a CHILD of a named asset

longname

    A alphabetical string which indicates the full subasset name (ex: PIZZA.DOMINOS)


# Specifications
1. Subasset names must meet following requirements :
    *   1 to 250 characters in length (ie. PIZZA.X or PIZZA.REALLY-LONG-VALID-SUBASSET-NAME)
    *   Contain only characters : a-zA-Z0-9.-_@!
    *   Cannot start or end with a period (.)
    *   Cannot contain multiple consecutive periods (..)

2. Subasset can only be issued from same address as parent asset
3. Subasset can be transferred to a new owner address after initial issuance (if necessary)


# Issuances
Given the example of asset PIZZA and subasset PIZZA.DOMINOS

1. `issuance.initalize`
    - Add asset_longname TEXT UNIQUE field to Assets table

2. `issuance.validate`
    - Verify that issuing address is owner of PIZZA asset.
    - Verify that PIZZA.DOMINOS does not already exist by checking asset_longname for PIZZA.DOMINOS

3. `issuance.compose`
    - Issue numeric asset and set description to EXISTING DESCRIPTION + 3b3b6C50495a5a412e444f4d494e4f53
    ```
    (hex) 3b3b6C50495a5a412e444f4d494e4f53
    (text) ;;lPIZZA.DOMINOS

    ;; = marks start of key/value pairs
    l  = longname

    PIZZA.DOMINOS = long asset name
    ```

4. `issuance.parse`
    - After block X, description.split('3b3b') to get name/value pairs. If name/value pairs are present
        1. decode name/value pairs from hex to text
        2. parse in longname
        3. create issuance record
        4. update Assets table to set asset_longname to longname value

# API
1. `get_issuances` & `get_asset_info` 
    - return new asset_longname value (if any)